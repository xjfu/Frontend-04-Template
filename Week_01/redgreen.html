<style>
    div {
        background-color: gray;
        display: inline-block;
        margin: 30px;
        width: 100px;
        height: 100px;
        border-radius: 50%;
    }
    .green.light {
        background-color: green;
    }
    .yellow.light {
        background-color: yellow;
    }
    .red.light {
        background-color: red;
    }
</style>
<div class="green"></div>
<div class="yellow"></div>
<div class="red"></div>
<script>
    const log = console.log.bind(console)
    function green() {
        var light =  document.getElementsByTagName("div")
        for (let i = 0; i < 3; i++) {
            light[i].classList.remove("light")
        }
        document.querySelector(".green").classList.add("light")
    }
    function red() {
        var light =  document.getElementsByTagName("div")
        for (let i = 0; i < 3; i++) {
            light[i].classList.remove("light")
        }
        document.querySelector(".red").classList.add("light")
    }
    function yellow() {
        var light =  document.getElementsByTagName("div")
        for (let i = 0; i < 3; i++) {
            light[i].classList.remove("light")
        }
        document.querySelector(".yellow").classList.add("light")
    }
    function go(i) {
        log("i", i)
        green()
        setTimeout(function(){
            i = i + 1
            yellow()
            setTimeout(function(){
                i = i + 1
                red()
                setTimeout(function(){
                    i = i + 1
                    go(i)
                },500)
            }, 200)
        }, 1000)
    }
    go(0)
    
</script>